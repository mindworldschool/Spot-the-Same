<!-- Find it First ‚Äî Fullscreen Embed with Auto Language -->
<!--
  This is the correct embed code to use on your website.
  It detects language from:
  1. URL path (e.g., /en/finditfirst)
  2. HTML lang attribute
  3. Browser language
  4. Defaults to Ukrainian
-->

<div id="findit-wrapper" style="
  position: relative;
  width: 100%;
  height: 100vh;
  max-width: 1920px;
  margin: 0 auto;
  overflow: hidden;
  background-color: #EC8D00;
">
  <iframe
    id="findit-iframe"
    src=""
    style="
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
      display: block;
    "
    loading="lazy"
    allow="fullscreen"
    referrerpolicy="no-referrer">
  </iframe>
</div>

<style>
@media (max-width: 768px) {
  #findit-wrapper {
    height: 100dvh;
  }
}
</style>

<script>
(function () {
  // ====== 1. –ü—ã—Ç–∞–µ–º—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —è–∑—ã–∫ –∏–∑ URL –ø—É—Ç–∏ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã ======
  var currentPath = window.location.pathname.toLowerCase();
  var lang = '';

  console.log('üåç [Find it First Embed] Checking current path:', currentPath);

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—É—Ç—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —è–∑—ã–∫–æ–≤—ã—Ö –ø—Ä–µ—Ñ–∏–∫—Å–æ–≤
  if (currentPath.includes('/en/') || currentPath.includes('/english/')) {
    lang = 'en';
    console.log('üåç [Find it First Embed] Language detected from URL path: en');
  } else if (currentPath.includes('/ru/') || currentPath.includes('/russian/')) {
    lang = 'ru';
    console.log('üåç [Find it First Embed] Language detected from URL path: ru');
  } else if (currentPath.includes('/es/') || currentPath.includes('/spanish/')) {
    lang = 'es';
    console.log('üåç [Find it First Embed] Language detected from URL path: es');
  }

  // ====== 2. –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏ –≤ –ø—É—Ç–∏, –ø—ã—Ç–∞–µ–º—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–∑ –∞—Ç—Ä–∏–±—É—Ç–∞ lang ======
  if (!lang) {
    var htmlLang = document.documentElement.lang || '';
    htmlLang = htmlLang.toLowerCase();

    console.log('üåç [Find it First Embed] HTML lang attribute:', htmlLang);

    if (htmlLang.includes('uk') || htmlLang.includes('ua')) {
      lang = 'ua';
      console.log('üåç [Find it First Embed] Language detected from HTML lang: ua');
    } else if (htmlLang.includes('en')) {
      lang = 'en';
      console.log('üåç [Find it First Embed] Language detected from HTML lang: en');
    } else if (htmlLang.includes('ru')) {
      lang = 'ru';
      console.log('üåç [Find it First Embed] Language detected from HTML lang: ru');
    } else if (htmlLang.includes('es')) {
      lang = 'es';
      console.log('üåç [Find it First Embed] Language detected from HTML lang: es');
    }
  }

  // ====== 3. –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏, –ø—ã—Ç–∞–µ–º—Å—è –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–∑ —è–∑—ã–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞ ======
  if (!lang) {
    var browserLang = (navigator.language || navigator.userLanguage || '').toLowerCase();
    console.log('üåç [Find it First Embed] Browser language:', browserLang);

    if (browserLang.startsWith('uk') || browserLang.startsWith('ua')) {
      lang = 'ua';
      console.log('üåç [Find it First Embed] Language detected from browser: ua');
    } else if (browserLang.startsWith('en')) {
      lang = 'en';
      console.log('üåç [Find it First Embed] Language detected from browser: en');
    } else if (browserLang.startsWith('ru')) {
      lang = 'ru';
      console.log('üåç [Find it First Embed] Language detected from browser: ru');
    } else if (browserLang.startsWith('es')) {
      lang = 'es';
      console.log('üåç [Find it First Embed] Language detected from browser: es');
    }
  }

  // ====== 4. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π ======
  if (!lang) {
    lang = 'ua';
    console.log('üåç [Find it First Embed] Using default language: ua');
  }

  // ====== 5. –§–æ—Ä–º–∏—Ä—É–µ–º URL –∏–≥—Ä—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —è–∑—ã–∫–∞ ======
  var gameBaseURL = "https://mindworldschool.github.io/Find-it-First/";
  var finalURL = gameBaseURL + "?lang=" + lang;

  console.log('üåç [Find it First Embed] Final game URL:', finalURL);

  // ====== 6. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º src iframe ======
  var iframeElement = document.getElementById("findit-iframe");
  if (iframeElement) {
    iframeElement.src = finalURL;
  } else {
    console.error('‚ùå [Find it First Embed] iframe element not found!');
  }
})();
</script>
